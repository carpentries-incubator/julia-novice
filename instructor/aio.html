<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Programming with Julia: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [ ['$','$'], ['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="manifest" href="../site.webmanifest">
<link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav incubator"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="Carpentries Incubator" src="../assets/images/incubator-logo.svg"><abbr class="icon" title="This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback." style="text-decoration: unset">
           
          <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#field-testing-alpha-stage" class="external-link alert-link" style="color: #383838">Alpha
            <i aria-hidden="true" class="icon" data-feather="alert-triangle" style="background: #FFC700; border-radius: 5px"></i>
          </a>
          <span class="visually-hidden">This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback.</span>
        </abbr>
        
      </div>
    </div>
    <div class="selector-container ">
      
      <div class="beta-alert alert alert-light alert-dismissable fade show" role="alert">
        
        
        
        <i aria-hidden="true" class="icon" data-feather="alert-circle" style="color: #5bbad5"></i>
        
        Workbench Beta | 
        <a href="https://carpentries.typeform.com/to/KRBl4IZM" class="external-link alert-link" style="text-decoration: wavy overline">Give Feedback</a> | 
        <a href="https://carpentries.github.io/workbench/beta-phase.html" class="external-link alert-link">Learn More</a>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
      
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="../assets/images/incubator-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Programming with Julia
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
      <i role="img" aria-label="search button" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Programming with Julia
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"></ul>
</li>
      </ul>
</div>
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
<input class="form-control me-2 searchbox" type="search" placeholder="Search" aria-label="Search"><button class="btn btn-outline-success tablet-search-button" type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="search button"></i>
        </button>
      </fieldset>
</form>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Programming with Julia
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
  <div id="sidebar-col" class="col-lg-4">
    <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle"><i class="search-icon" data-feather="x" role="img"></i></button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->
      
            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01_Introduction.html">1. Introduction</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02_Getting_started.html">2. Using the REPL</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03_Julia_type_system.html">3. Julia type system</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04_Using_the_package_manager.html">4. Using the package manager</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05_Write_functions.html">5. Write functions!</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06_Control_flow.html">6. Control flow</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07_Using_Modules.html">7. Using Modules</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08_Creating_Packages.html">8. Creating Packages</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09_Adding_tests.html">9. Adding tests</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10_Wrapping_Up.html">10. Wrapping Up and Moving Forward</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width resources">
<a href="../instructor/aio.html">See all in one page</a>

            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">
            
            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01_Introduction"><p>Content from <a href="01_Introduction.html">Introduction</a></p>
<hr>
<p> Last updated on 2023-08-09 | 
        
        <a href="https://github.com/fishtree-attempt/julia-novice/edit/main/episodes/01_Introduction.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 5 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“What is Julia?”</li>
<li>“Why use Julia?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Explain the difference between interpreted and compiled programming
languages”</li>
<li>“Compare how composing works in Julia and some common programming
languages”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="what-is-a-programming-language"><h2 class="section-heading">What is a programming language?<a class="anchor" aria-label="anchor" href="#what-is-a-programming-language"></a>
</h2>
<hr class="half-width">
<p>A programming language mediates between the natural language of
humans and the machine instructions of a computer. The human specifies
what the computer should compute on a high level using the programming
language. This specification will be translated to machine instructions,
the so called assembly code, which will be executed by the processor
(CPU, GPU, …).</p>
<div class="section level3">
<h3 id="interpreting-and-compiling">Interpreting and compiling<a class="anchor" aria-label="anchor" href="#interpreting-and-compiling"></a>
</h3>
<p>This translation happens differently depending on the programming
language you use. There are mainly two different techniques:
<em>compiling</em> and <em>interpreting</em>. Interpreted languages such
as Python and R translate instructions one at a time, while compiled
languages like C and Fortran take whole documents, analyze the structure
of the code, and perform optimizations before translating it to machine
code.</p>
<p>This leads to more efficient machine instructions of the compiled
code at the cost of less flexibility and more verbose code. Most
prominently, compiled languages need an explicit type declaration for
each variable.</p>
</div>
</section><section id="why-julia"><h2 class="section-heading">Why Julia?<a class="anchor" aria-label="anchor" href="#why-julia"></a>
</h2>
<hr class="half-width">
<p>Julia is a programming language that superficially looks like an
interpreted language and mostly behaves like one. But before each
function is executed it will be compiled <em>just in time</em>.</p>
<p>Thus you get the flexibility of an interpreted language and the
execution speed of a compiled language at the cost of waiting a bit
longer for the first execution of any function.</p>
<p>There is another aspect of Julia that makes it interesting and that
is the way packages compose. This is captured the best by an analogy
from <a href="https://github.com/ElOceanografo" class="external-link">Sam Urmy</a>:</p>
<blockquote>
<p>Say you want a toy truck.</p>
<p>The Python/R solution is to look for the appropriate package–like
buying a Playmobil truck. It comes pre-manufactured, well-engineered and
tested, and does 95% of what you would ever want a toy truck to do.</p>
<p>The Fortran/C solution is to build the truck from scratch. This
allows total customization and you can optimize the features and
performance however you want. The downside is that it takes more time,
you need woodworking skills, and might hurt yourself with the power
tools.</p>
<p>The Julia solution is like Legos. You can get the truck kit if you
want–which will require a bit more assembly than the Playmobil, but way
less than building it from scratch. Or, you can get the component pieces
and assemble the truck to your own specs. There’s no limit to what you
can put together, and because the pieces all have the same system of
bumps, everything snaps together quickly and easily.</p>
<p align="center">
<img src="https://global.discourse-cdn.com/business5/uploads/julialang/original/3X/5/2/52e63856ad9e23876cda4297a04171879fa625b4.jpeg" alt="" width="600" height="400" class="figure"></p>
<p>OK, sure. Toy trucks are like linear algebra, though, a common
request, and every “toy system” will have an implementation that works
basically fine. But what if you want a time-traveling sailing/space ship
with lasers AND dragon wings? And it should be as easy to build and use
as a basic dump truck?</p>
<p align="center">
<img src="https://global.discourse-cdn.com/business5/uploads/julialang/original/3X/2/8/2865d34fb35c181dc3c5c0f0b71915f31310269c.jpeg" alt="" width="600" height="400" class="figure"></p>
<p>There’s a reason that only Lego ever made anything like Dr. Cyber’s
Flying Time Vessel!</p>
</blockquote>
<p>Originally posted on <a href="https://discourse.julialang.org/t/what-is-the-advantage-of-julia-over-fortran/65964/101" class="external-link">Discourse</a>.</p>
<div id="keypoints" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div id="keypoints" class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints"></a>
</h3>
<div class="callout-content">
<ul>
<li>“Julia is a just-in-time compiled language”</li>
<li>“Julia packages compose well”</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-02_Getting_started"><p>Content from <a href="02_Getting_started.html">Using the REPL</a></p>
<hr>
<p> Last updated on 2023-08-11 | 
        
        <a href="https://github.com/fishtree-attempt/julia-novice/edit/main/episodes/02_Getting_started.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 20 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“How to use the REPL?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Explore basic functionality of input.”</li>
<li>“Learn how to declare variables.”</li>
<li>“Learn about REPL modes.”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="entering-the-repl"><h2 class="section-heading">Entering the REPL<a class="anchor" aria-label="anchor" href="#entering-the-repl"></a>
</h2>
<hr class="half-width">
<p>Melissa and her classmates open a terminal and launch
<code>julia</code>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">julia</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>               _</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>   _       _ <span class="fu">_</span>(_)_     <span class="op">|</span>  Documentation<span class="op">:</span> https<span class="op">://</span>docs.julialang.org</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  (_)     <span class="op">|</span> (_) (_)    <span class="op">|</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>   _ _   _<span class="op">|</span> <span class="op">|</span>_  __ _   <span class="op">|</span>  <span class="dt">Type</span> <span class="st">"?"</span> <span class="cf">for</span> help, <span class="st">"]?"</span> <span class="cf">for</span> <span class="bu">Pkg</span> help.</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">|</span> <span class="op">|</span> <span class="op">|</span> <span class="op">|</span> <span class="op">|</span> <span class="op">|</span> <span class="op">|/</span> _<span class="ss">` |  |</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">|</span> <span class="op">|</span> <span class="op">|</span>_<span class="op">|</span> <span class="op">|</span> <span class="op">|</span> <span class="op">|</span> (_<span class="op">|</span> <span class="op">|</span>  <span class="op">|</span>  Version <span class="fl">1.7.2</span> (<span class="fl">2022</span><span class="op">-</span><span class="fl">02</span><span class="op">-</span><span class="fl">06</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a> _<span class="op">/</span> <span class="op">|\</span>__<span class="ch">'_|_|_|\__'</span>_<span class="op">|</span>  <span class="op">|</span>  Official https<span class="op">://</span>julialang.org<span class="op">/</span> release</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="op">|</span>__<span class="op">/</span>                   <span class="op">|</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span></span></code></pre>
</div>
<p>This is the so-called REPL, which stands for
<strong>r</strong>ead-<strong>e</strong>valuate-<strong>p</strong>rint-<strong>l</strong>oop.
The interactive command-line REPL allows quick and easy execution of
Julia statements.</p>
<p>Like the terminal, the Julia REPL has a prompt, where it awaits
input:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span></span></code></pre>
</div>
<div id="implicit-promt" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="implicit-promt" class="callout-inner">
<h3 class="callout-title">implicit promt<a class="anchor" aria-label="anchor" href="#implicit-promt"></a>
</h3>
<div class="callout-content">
<p>Most of the code boxes that follow <em>do not show the
<code>julia&gt;</code> prompt</em>, even though it’s there in the REPL.
Why?</p>
<p>It’s important to delineate input (what you type) and output (how the
machine responds). The prompt can be confusing, so it is excluded. You
may assume that any <strong>Julia</strong> box prepends the prompt on
each line of input.</p>
</div>
</div>
</div>
<div id="visual-studio-code" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="visual-studio-code" class="callout-inner">
<h3 class="callout-title">Visual Studio Code<a class="anchor" aria-label="anchor" href="#visual-studio-code"></a>
</h3>
<div class="callout-content">
<p>An alternative to using the REPL through a terminal is to work with
<b>V</b>isual <b>S</b>tudio <b>C</b>ode or its open source altenative
VSCodium. VSC is a source code editor for which a <code>julia</code>
extension is available. After installing the application, simply click
on the <kbd>“Extension”</kbd> symbol on the left side and search for
<code>julia</code>. Once installt <code>julia</code> remains usable and
can be selected as a programming language in new documents.</p>
<p>For further guidance and visual aid, check out the provided <a href="https://av.tib.eu/media/62060" class="external-link">video</a>!</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="variables">Variables<a class="anchor" aria-label="anchor" href="#variables"></a>
</h3>
<p>The first thing they try is to perform basic arithmetic
operations:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1</span> <span class="op">+</span> <span class="fl">4</span> <span class="op">*</span> <span class="fl">7.3</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">30.2</span></span></code></pre>
</div>
<p>That works as expected. It is also possible to bind a name to a value
via the assignment operator <code>=</code>, which makes it easier to
refer to the value later on. These names are called
<em>variables</em>.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>distance <span class="op">=</span> <span class="fl">30.2</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>distance_x_2 <span class="op">=</span> <span class="fl">2</span> <span class="op">*</span> distance</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">60.4</span></span></code></pre>
</div>
<p>Melissa notices that assignment also returns the value. She can also
check which variables are defined in the current session by running</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">varinfo</span>()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> name                    size summary
 –––––––––––––––– ––––––––––– –––––––
 Base                         Module
 Core                         Module
 InteractiveUtils 270.164 KiB Module
 Main                         Module
 ans                  8 bytes Float64
 distance             8 bytes Float64
 distance_x_2         8 bytes Float64</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="unicode">Unicode<a class="anchor" aria-label="anchor" href="#unicode"></a>
</h3>
<p>In Julia, Unicode characters are also allowed as variables like
<code>α = 2</code>. Unicode characters can be entered by a backslash
followed by their <a href="https://oeis.org/wiki/List_of_LaTeX_mathematical_symbols" class="external-link">LaTeX
name</a> and then pressing <kbd>tab</kbd> (in this case
<code>\alpha</code><kbd>tab</kbd>).</p>
</div>
<div class="section level3">
<h3 id="repl-modes">REPL-modes<a class="anchor" aria-label="anchor" href="#repl-modes"></a>
</h3>
<p>Unfortunately Melissa can’t remember the LaTeX name of ∂ so she
copies the character , presses <kbd>?</kbd> for help mode,</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>?</span></code></pre>
</div>
<p>pastes the ∂ character, then presses enter:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>help?<span class="op">&gt;</span> ∂</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>"∂" can be typed by \partial&lt;tab&gt;</code></pre>
</div>
<p>Great! This way she can easily look up the names she needs. She gets
back to normal mode by pressing <kbd>backspace</kbd>.</p>
<p>Another useful mode is the <em>shell mode</em> that can be entered by
pressing <kbd>;</kbd>. The prompt has now changed:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>shell<span class="op">&gt;</span></span></code></pre>
</div>
<p>Shell mode can be used to issue commands to the underlying shell, but
don’t confuse it with an actual shell: special shell syntax like piping
won’t work. Like before, hit <kbd>backspace</kbd> to get back to the
Julia prompt.</p>
<div id="hello-shell" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="hello-shell" class="callout-inner">
<h3 class="callout-title">Hello, <code>shell&gt;</code> !<a class="anchor" aria-label="anchor" href="#hello-shell"></a>
</h3>
<div class="callout-content">
<p>Use the shell mode to create a file called <code>hello.jl</code> with
the nano terminal text editor. Inside that file write the simple hello
world program <code>print("Hello World!")</code>.</p>
<p>Check the content of the file using <code>cat hello.jl</code> and
then run the program using <code>julia hello.jl</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>;</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>shell<span class="op">&gt;</span> nano hello.jl</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>shell<span class="op">&gt;</span> cat hello.jl</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fu">print</span><span class="op">(</span><span class="st">"Hello World!"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>shell<span class="op">&gt;</span> julia hello.jl</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Hello World!</code></pre>
</div>
<p><kbd>backspace</kbd></p>
</div>
</div>
</div>
</div>
<p>Finally there is <em>package mode</em> that is entered with
<kbd>]</kbd> which is used for package management, which will be covered
later on:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>]</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>pkg<span class="op">&gt;</span></span></code></pre>
</div>
<p>To exit <em>shell</em>, <em>help</em> or <em>pkg</em> mode, hit
<kbd>backspace</kbd>.</p>
<div id="keypoints" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div id="keypoints" class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints"></a>
</h3>
<div class="callout-content">
<ul>
<li>“The REPL reads the given input, evaluates the given expression and
prints the resulting output to the user.”</li>
<li>“Pressing <kbd>?</kbd> enters help mode.”</li>
<li>“Pressing <kbd>;</kbd> enters shell mode.”</li>
<li>“Pressing <kbd>]</kbd> enters pkg mode.”</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-03_Julia_type_system"><p>Content from <a href="03_Julia_type_system.html">Julia type system</a></p>
<hr>
<p> Last updated on 2023-08-09 | 
        
        <a href="https://github.com/fishtree-attempt/julia-novice/edit/main/episodes/03_Julia_type_system.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 20 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“What is the use of types?”</li>
<li>“How are types organized in Julia?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Understand the structure of the type tree.”</li>
<li>“Know how to traverse the type tree.”</li>
<li>“Know how to build mutable and immutable types.”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="structuring-variables"><h2 class="section-heading">Structuring variables<a class="anchor" aria-label="anchor" href="#structuring-variables"></a>
</h2>
<hr class="half-width">
<p>Melissa wants to keep the variables corresponding to the trebuchet
(<code>counterweight</code>, <code>release_angle</code>) separate from
the variables coming from the environment (<code>wind</code>,
<code>target_distance</code>). That is why she chooses to group them
together using <em>structures</em>. There are two structure types:</p>
<ul>
<li>immutable structures, whose fields can not be changed after
creation</li>
<li>keyword: <code>struct</code>
</li>
<li>mutable structures, whose fields can change after creation</li>
<li>keyword: <code>mutable struct</code>
</li>
</ul>
<p>Since Melissa wants to change the parameters of the trebuchet, she
uses a <code>mutable struct</code> for it. But she cannot influence the
environment and thus uses a <code>struct</code> for those values.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">mutable struct</span> Trebuchet</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  counterweight<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  release_angle<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Environment</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  wind<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  target_distance<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="types-and-hierarchy">Types and hierarchy<a class="anchor" aria-label="anchor" href="#types-and-hierarchy"></a>
</h3>
<p>Here <code>::Float64</code> is a type specification, indicating that
this variable should be a 64-bit floating point number, and
<strong><code>::</code></strong> is an <em>operator</em> that is read
“is an instance of.” If Melissa hadn’t specified the type, the variables
would have the type <code>Any</code> by default.</p>
<p>In Julia every type can have only one supertype, so let’s count how
many types are between <code>Float64</code> and <code>Any</code>:</p>
<p><strong>1.</strong></p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">supertype</span>(<span class="dt">Float64</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">AbstractFloat</span></span></code></pre>
</div>
<p><strong>2.</strong></p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">supertype</span>(<span class="dt">AbstractFloat</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">Real</span></span></code></pre>
</div>
<p><strong>3.</strong></p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">supertype</span>(<span class="dt">Real</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">Number</span></span></code></pre>
</div>
<p><strong>4.</strong></p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">supertype</span>(<span class="dt">Number</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">Any</span></span></code></pre>
</div>
<p>So we have the relationship
<code>Float64 &lt;: AbstractFloat &lt;: Real &lt;: Number &lt;: Any</code>
where <a href="https://docs.julialang.org/en/v1/base/base/#Core.:%3C:" class="external-link"><strong><code>&lt;:</code></strong>
is the <em>subtype operator</em></a>, used here to mean the item on the
left “is a subtype of” the item on the right.</p>
<p><code>Float64</code> is a <em>concrete</em> type, which means that
you can actually create objects of this type. For example
<code>1.0</code> is an object of type <code>Float64</code>. We can check
this at the REPL using either (or both) the <code>typeof</code> function
or the <a href="https://docs.julialang.org/en/v1/base/base/#Core.isa" class="external-link"><code>isa</code>
operator</a>:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fl">1.0</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">Float64</span></span></code></pre>
</div>
<p>or</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1.0</span> isa <span class="dt">Float64</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">true</span></span></code></pre>
</div>
<p>All the other types are <em>abstract</em> types that are used to
address groups of types. For example, if we declare a variable as
<code>a::Real</code> then it can be bound to any value that is a subtype
of <code>Real</code>.</p>
<p>Let’s quickly check what are all the subtypes of
<code>Real</code>:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subtypes</span>(<span class="dt">Real</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>4-element Vector{Any}:
 AbstractFloat
 AbstractIrrational
 Integer
 Rational</code></pre>
</div>
<p>This way the types form a tree with abstract types on the nodes and
concrete types as leaves. Have a look at this visualization of all
subtypes of <code>Number</code>: <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/40/Type-hierarchy-for-julia-numbers.png/1200px-Type-hierarchy-for-julia-numbers.png" alt="" class="figure"></p>
<div id="is-it-real" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="is-it-real" class="callout-inner">
<h3 class="callout-title">Is it Real?<a class="anchor" aria-label="anchor" href="#is-it-real"></a>
</h3>
<div class="callout-content">
<p>For which of the following types <code>T</code> would the following
return <code>false</code>?</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1.0</span> isa T</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>Real</li>
<li>Number</li>
<li>Float64</li>
<li>Integer <!---correct-->
</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The correct answer is 4: while <code>1</code> is an integer,
<code>1.0</code> is a floating-point value.</p>
</div>
</div>
</div>
</div>
</div>
</section><section id="creating-a-subtype"><h2 class="section-heading">Creating a subtype<a class="anchor" aria-label="anchor" href="#creating-a-subtype"></a>
</h2>
<hr class="half-width">
<p>A concrete type can be made a subtype of an abstract type with the
subtype operator <strong><code>&lt;:</code></strong>. Since
<code>Trebuchet</code> contains several fields that are mutable Melissa
thinks it is a good idea to make it a subtype of
<code>AbstractVector</code>.</p>
<div id="caveat-redefining-structs" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="caveat-redefining-structs" class="callout-inner">
<h3 class="callout-title">Caveat: Redefining Structs<a class="anchor" aria-label="anchor" href="#caveat-redefining-structs"></a>
</h3>
<div class="callout-content">
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">mutable struct</span> Trebuchet <span class="op">&lt;:</span><span class="dt"> AbstractVector{Float64}</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  counterweight<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  release_angle<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>ERROR: invalid redefinition of constant Trebuchet
Stacktrace:
[1] top-level scope
   @ REPL[9]:1</code></pre>
</div>
<p>This error message is clear: you’re not allowed to define a
<code>struct</code> using a name that’s already in use.</p>
<div class="section level2 warning">
<h2 id="restart-the-repl">Restart the REPL<a class="anchor" aria-label="anchor" href="#restart-the-repl"></a>
</h2>
<p>In Julia it is not very easy to redefine <code>struct</code>s. It is
necessary to restart the REPL to define the new definition of
<code>Trebuchet</code>, or take a different name instead.</p>
</div>
</div>
</div>
</div>
<p><em>Melissa decides to keep going and come back to this
later.</em></p>
<div id="keypoints" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div id="keypoints" class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints"></a>
</h3>
<div class="callout-content">
<ul>
<li>“In Julia types have only one direct supertype.”</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-04_Using_the_package_manager"><p>Content from <a href="04_Using_the_package_manager.html">Using the package manager</a></p>
<hr>
<p> Last updated on 2023-08-17 | 
        
        <a href="https://github.com/fishtree-attempt/julia-novice/edit/main/episodes/04_Using_the_package_manager.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 20 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“Where do I find packages?”</li>
<li>“How do I add packages?”</li>
<li>“How can I use packages?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Learn to add packages using pkg-mode”</li>
<li>“Learn to resolve name conflicts”</li>
<li>“Learn to activate environments”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="the-package-manager"><h2 class="section-heading">The package manager<a class="anchor" aria-label="anchor" href="#the-package-manager"></a>
</h2>
<hr class="half-width">
<div id="the-package-manager-1" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-package-manager-1" class="callout-inner">
<h3 class="callout-title">The package Manager<a class="anchor" aria-label="anchor" href="#the-package-manager-1"></a>
</h3>
<div class="callout-content">
<p>This chapter focuses on the package mode available within the
REPL.</p>
<p>A different aproach would be using the <kbd>Pkg</kbd> notation.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Pkg</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">add</span>(<span class="st">"Example"</span>)</span></code></pre>
</div>
<p>If you prefer to use that method and want to know more, remember how
to get <a href="02_Getting_started.html">help</a>.</p>
<p><em>(for exp. <kbd>?Pkg.add</kbd>)</em></p>
</div>
</div>
</div>
<p>Now it is time for Melissa and their mates to simulate the launch of
the trebuchet. The necessary equations are really complicated, but an
investigation on <a href="https://juliahub.com/" class="external-link">JuliaHub</a> revealed
that someone already implemented these and published it as the Julia
package <a href="https://juliahub.com/ui/Search?q=trebuchet&amp;type=packages" class="external-link"><code>Trebuchet.jl</code></a>.
That saves some real work.</p>
<p>Melissa enters package mode by pressing <kbd>]</kbd>:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>]</span></code></pre>
</div>
<p>The <code>julia&gt;</code> prompt becomes a blue <code>pkg&gt;</code>
prompt that shows the Julia version that Melissa is running.</p>
<p>After consulting the <a href="https://julialang.github.io/Pkg.jl/v1/" class="external-link">documentation</a> she
knows that the prompt is showing the <em>currently activated
environment</em> and that this is the global environment that is
activated by default.</p>
<p>However, she doesn’t want to clutter the global environment when
working on her project. The default global environment is indicated with
<code>(@v1.x)</code> before the <code>pkg&gt;</code> prompt, where
<code>x</code> is the minor version number of julia, so on julia 1.7 it
will look like <code>(@v1.7)</code>. To create a new environment she
uses the <code>activate</code> function of the package manager:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>(<span class="pp">@v1</span>.x) pkg<span class="op">&gt;</span> activate projects<span class="op">/</span>trebuchet</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  Activating project at `~/projects/trebuchet`</code></pre>
</div>
<p>In this environment she adds the <code>Trebuchet</code> package from
its open source code <a href="https://github.com/FluxML/Trebuchet.jl" class="external-link">repository on GitHub</a>
by typing</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>(trebuchet) pkg<span class="op">&gt;</span> add Trebuchet</span></code></pre>
</div>
<p>Melissa quickly recognizes that far more packages are being installed
than just <code>Trebuchet</code>. These are the dependencies of
<code>Trebuchet</code>. From the output</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[...]
Updating `[...]/projects/trebuchet/Project.toml`
  [98b73d46] + Trebuchet v0.2.1
  Updating `[...]/projects/trebuchet/Manifest.toml`
  [1520ce14] + AbstractTrees v0.3.3
  [79e6a3ab] + Adapt v1.1.0
  [...]</code></pre>
</div>
<p>she sees that two files were created: <code>Project.toml</code> and
<code>Manifest.toml</code>.</p>
<p>The project file <code>Project.toml</code> only contains the packages
needed for her project, while the manifest file
<code>Manifest.toml</code> records the direct and indirect dependencies
as well as their current version, thus providing a fully reproducible
record of the code that is actually executed. “That is really handy when
I want to share my work with the others,” thinks Melissa.</p>
<p>After the installation finished she can check the packages present in
her environment.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>(trebuchet) pkg<span class="op">&gt;</span> status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Status `~/projects/trebuchet/Project.toml`
  [f6369f11] ForwardDiff v0.10.36
  [295af30f] Revise v3.5.3
  [98b73d46] Trebuchet v0.2.2
</code></pre>
</div>
<p>Melissa can get back to the global environment using
<code>activate</code> without any parameters.</p>
<div id="why-use-github" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="why-use-github" class="callout-inner">
<h3 class="callout-title">Why use GitHub?<a class="anchor" aria-label="anchor" href="#why-use-github"></a>
</h3>
<div class="callout-content">
<p>Melissa could have added the GitHub version of Trebuchet.jl by
typing</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>(trebuchet) pkg<span class="op">&gt;</span> add Trebuchet<span class="co">#master</span></span></code></pre>
</div>
<p>In this case the JuliaHub version is the same as the GitHub version,
so Melissa does not need to specify the installation.</p>
<p>If you know a package is stable, go ahead and install the default
version registered on JuliaHub. Otherwise, it’s good to check how
different that version is from the current state of the software
project. Click through the link under “Repository” on the JuliaHub
package page.</p>
</div>
</div>
</div>
</section><section id="using-and-importing-packages"><h2 class="section-heading">Using and importing packages<a class="anchor" aria-label="anchor" href="#using-and-importing-packages"></a>
</h2>
<hr class="half-width">
<p>Now that Melissa added the package to her environment, she needs to
load it. Julia provides two keywords for loading packages:
<code>using</code> and <code>import</code>.</p>
<p>The difference is that <code>import</code> brings only the name of
the package into the namespace and then all functions in that package
need the name in front (prefixed). But packages can define a list of
function names to export, which means the functions should be brought
into the user’s namespace when he loads the package with
<code>using</code>. This makes working at the REPL more convenient.</p>
<div class="section level3">
<h3 id="name-conflicts">Name conflicts<a class="anchor" aria-label="anchor" href="#name-conflicts"></a>
</h3>
<p>It may happen that name conflicts arise. For example Melissa defined
a structure named <code>Trebuchet</code>, but the package she added to
the environment is also named <code>Trebuchet</code>. Now she would get
an error if she tried to <code>import</code>/<code>using</code> it
directly. One solution is to assign a nickname or alias to the package
upon <code>import</code> using the keyword <em><code>as</code></em>:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Trebuchet </span>as Trebuchets</span></code></pre>
</div>
<div id="keypoints" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div id="keypoints" class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints"></a>
</h3>
<div class="callout-content">
<ul>
<li>“Find packages on JuliaHub”</li>
<li>“add packages using <code>pkg&gt; add</code>”</li>
<li>“use many small environments rather than one big environment”</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-05_Write_functions"><p>Content from <a href="05_Write_functions.html">Write functions!</a></p>
<hr>
<p> Last updated on 2023-08-17 | 
        
        <a href="https://github.com/fishtree-attempt/julia-novice/edit/main/episodes/05_Write_functions.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 20 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“How do I call a function?”</li>
<li>“Where can I find help about using a function?”</li>
<li>“What are methods?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“usage of positional and keyword arguments”</li>
<li>“defining named and anonymous functions”</li>
<li>“reading error messages”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="working-with-functions"><h2 class="section-heading">Working with functions<a class="anchor" aria-label="anchor" href="#working-with-functions"></a>
</h2>
<hr class="half-width">
<p>Now that Melissa successfully installed the package she wants to
figure out what she can do with it.</p>
<p>Julia’s <code>Base</code> module offers a handy function for
inspecting other modules called <code>names</code>. Let’s look at its
docstring; remember that pressing <kbd>?</kbd> opens the
<strong>help?&gt;</strong> prompt:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>help?<span class="op">&gt;</span> names</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   names(x::Module; all::Bool = false, imported::Bool = false)

    Get an array of the names exported by a Module, excluding deprecated names.
    If all is true, then the list also includes non-exported names defined in
    the module, deprecated names, and compiler-generated names. If imported is
    true, then names explicitly imported from other modules are also included.

    As a special case, all names defined in Main are considered "exported",
    since it is not idiomatic to explicitly export names from Main.</code></pre>
</div>
<p>In Julia we have two types of arguments: <em>positional</em> and
<em>keyword</em>, separated by a semi-colon.</p>
<ol style="list-style-type: decimal">
<li>
<em>Positional arguments</em> are determined by their position and
thus the order in which arguments are given to the function
matters.</li>
<li>
<em>Keyword arguments</em> are passed as a combination of the
keyword and the value to the function. They can be given in any order,
but they need to have a default value.</li>
</ol>
<div id="challenge" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge" class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge"></a>
</h3>
<div class="callout-content">
<p>Let’s take a closer look at the signature of the <code>names</code>
function:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(x<span class="op">::</span><span class="dt">Module</span>; all<span class="op">::</span><span class="dt">Bool </span><span class="op">=</span> <span class="cn">false</span>, imported<span class="op">::</span><span class="dt">Bool </span><span class="op">=</span> <span class="cn">false</span>)</span></code></pre>
</div>
<p>It takes three arguments:</p>
<ol style="list-style-type: decimal">
<li>
<code>x</code>, a positional argument of type <code>Module</code>,
followed by a <strong><code>;</code></strong>
<!-- note: trailing spaces are deliberate-->
</li>
<li>
<code>all</code>, a keyword argument of type <code>Bool</code> with
a default value of <code>false</code>
</li>
<li>
<code>imported</code>, another <code>Bool</code> keyword argument
that defaults to <code>false</code>
</li>
</ol>
<p>Suppose Melissa wanted to get all names of the
<code>Trebuchets</code> module, including those that are not exported.
What would the function call look like?</p>
<ol style="list-style-type: decimal">
<li><code>names(Trebuchets, true)</code></li>
<li>
<code>names(Trebuchets, all = true)</code> <!---correct-->
</li>
<li><code>names(Trebuchets, all)</code></li>
<li>
<code>names(Trebuchets; all = true)</code> <!---correct-->
</li>
<li>Answer 2 and 4 <!---correct-->
</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Both arguments are present, but <code>true</code> is presented
without a keyword. This throws a
<code>MethodError: no method matching names(::Module, ::Bool)</code>
</li>
<li>This is a <strong>correct</strong> call.</li>
<li>This is also <strong>correct</strong>: you <em>can</em> specify
where the positional arguments end with the <code>;</code>, but you do
not have to.</li>
<li>Two arguments are present, but the keyword <code>all</code> is not
assigned a value. This throws a
<code>MethodError: no method matching names(::Module, ::typeof(all))</code>
</li>
<li>This is the <strong>most correct</strong> answer.</li>
</ol>
</div>
</div>
</div>
</div>
<p>Before starting to work in a new document, Melissa has to:</p>
<p>Activate her environment</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Pkg</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">activate</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"projects"</span>, <span class="st">"trebuchet"</span>))</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">instantiate</span>()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  Activating project at `~/projects/trebuchet`
</code></pre>
</div>
<p>Importing the package under its modified name</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Trebuchet </span>as Trebuchets</span></code></pre>
</div>
<p>Defining the structures</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">mutable struct</span> Trebuchet <span class="op">&lt;:</span><span class="dt"> AbstractVector{Float64}</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  counterweight<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  release_angle<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Environment</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  wind<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  target_distance<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>Now she can execute</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Trebuchets)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>6-element Vector{Symbol}:
 :Trebuchet
 :TrebuchetState
 :run
 :shoot
 :simulate
 :visualise</code></pre>
</div>
<p>which yields the exported names of the <code>Trebuchets</code>
module. By convention types are named with <em>CamelCase</em> while
functions typically have <em>snake_case</em>. Since Melissa is
interested in simulating shots, she looks at the <code>shoot</code>
function from <code>Trebuchets</code> (again, using <kbd>?</kbd>):</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>help?<span class="op">&gt;</span> Trebuchets.shoot</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  shoot(ws, angle, w)
  shoot((ws, angle, w))

  Shoots a Trebuchet with weight w in kg. Releases the weight at the release
  angle angle in radians. The current wind speed is ws in m/s.
  Returns (t, dist), with travel time t in s and travelled distance dist in m.</code></pre>
</div>
<div id="methods" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="methods" class="callout-inner">
<h3 class="callout-title">Methods<a class="anchor" aria-label="anchor" href="#methods"></a>
</h3>
<div class="callout-content">
<p>Here we see that the <code>shoot</code> function has two different
<em>methods</em>. The first one takes three arguments, while the second
takes a <code>Tuple</code> with three elements.</p>
</div>
</div>
</div>
<p>Now she is ready to fire the first shot.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>Trebuchets.<span class="fu">shoot</span>(<span class="fl">5</span>, <span class="fl">0.25</span>pi, <span class="fl">500</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>(Trebuchet.TrebuchetState(Trebuchet.Lengths{Float64}(1.524, 2.0702016, 0.5334, 0.6096, 2.0826984, 0.8311896, 0.037947600000000005), Trebuchet.Masses{Float64}(226.796185, 0.14877829736, 4.8307587405), Trebuchet.Angles{Float64}(-0.4328124904398228, 1.1928977546511481, 1.437218009822302), Trebuchet.AnglularVelocities{Float64}(-6.80709816163242, 10.240657933288563, -22.420510883318446), Trebuchet.Constants{Float64}(5.0, 1.0, 1.0, 9.80665, 0.7853981633974482), Trebuchet.Inertias{Float64}(0.042140110093804806, 2.7288719786342384), Val{:End}(), 60.0, Trebuchet.Vec(114.88494815382731, -1.5239999999999991), Trebuchet.Vec(10.886295450427806, -21.290442812748466), Solution(387)
, 3.943408301947865, Val{:Released}()), 114.88494815382731)</code></pre>
</div>
<p>That is a lot of output, but Melissa is actually only interested in
the distance, which is the second element of the tuple that was
returned. So she tries again and grabs the second element this time:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>Trebuchets.<span class="fu">shoot</span>(<span class="fl">5</span>, <span class="fl">0.25</span>pi, <span class="fl">500</span>)[<span class="fl">2</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">114.88494815382731</span></span></code></pre>
</div>
<p>which means the shot traveled approximately 118 m.</p>
<div class="section level3">
<h3 id="defining-functions">Defining functions<a class="anchor" aria-label="anchor" href="#defining-functions"></a>
</h3>
<p>Melissa wants to make her future work easier and she fears she might
forget to take the second element. That’s why she puts it together in a
<em>function</em> like this:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">shoot_distance</span>(windspeed, angle, weight)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>       Trebuchets.<span class="fu">shoot</span>(windspeed, angle, weight)[<span class="fl">2</span>]</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> ;</span></code></pre>
</div>
<div id="implicit-return" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="implicit-return" class="callout-inner">
<h3 class="callout-title">Implicit return<a class="anchor" aria-label="anchor" href="#implicit-return"></a>
</h3>
<div class="callout-content">
<p>Note that Melissa didn’t have to use the <code>return</code> keyword,
since in Julia the value of the last line will be returned by default.
But she could have used an explicit return and the function would behave
the same.</p>
</div>
</div>
</div>
<p>Now Melissa can just call her wrapper function:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shoot_distance</span>(<span class="fl">5</span>, <span class="fl">0.25</span>pi, <span class="fl">500</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">114.88494815382731</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="adding-methods">Adding methods<a class="anchor" aria-label="anchor" href="#adding-methods"></a>
</h3>
<p>Since Melissa wants to work with the structs <code>Trebuchet</code>
and <code>Environment</code>, she adds another convenience method for
those:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">shoot_distance</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>, env<span class="op">::</span><span class="dt">Environment</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>     <span class="fu">shoot_distance</span>(env.wind, trebuchet.release_angle, trebuchet.counterweight)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> ;</span></code></pre>
</div>
<p>This method will call the former method and pass the correct fields
from the <code>Trebuchet</code> and <code>Environment</code>
structures.</p>
</div>
<div class="section level3">
<h3 id="slurping-and-splatting">Slurping and splatting<a class="anchor" aria-label="anchor" href="#slurping-and-splatting"></a>
</h3>
<p>By peeking into the <a href="https://docs.julialang.org/en/v1/manual/faq/#The-two-uses-of-the-...-operator:-slurping-and-splatting" class="external-link">documentation</a>,
Melissa discovers that she doesn’t need to explicitly declare all the
input arguments. Instead she can <em>slurp</em> the arguments in the
function definition and <em>splat</em> them in the function body using
three dots (<code>...</code>) like this:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">shoot_distance</span>(args<span class="op">...</span>) <span class="co"># slurping</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>     Trebuchets.<span class="fu">shoot</span>(args<span class="op">...</span>)[<span class="fl">2</span>] <span class="co"># splatting</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> ;</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="anonymous-functions">Anonymous functions<a class="anchor" aria-label="anchor" href="#anonymous-functions"></a>
</h3>
<p>Sometimes it is useful to have a new function and not have to come up
with a new name. These are <em>anonymous functions</em>. They can be
defined with either the so-called stabby lambda notation,</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>(windspeed, angle, weight) <span class="op">-&gt;</span> Trebuchets.<span class="fu">shoot</span>(windspeed, angle, weight)[<span class="fl">2</span>] ;</span></code></pre>
</div>
<p>or in long form, by omitting the name:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> (windspeed, angle, weight)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>      Trebuchets.<span class="fu">shoot</span>(windspeed, angle, weight)[<span class="fl">2</span>]</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> ;</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="errors-and-macros">Errors and macros<a class="anchor" aria-label="anchor" href="#errors-and-macros"></a>
</h3>
<p>Melissa would like to set the fields of a <code>Trebuchet</code>
using an index. She writes</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>Trebuchets[<span class="fl">1</span>] <span class="op">=</span> <span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>ERROR: MethodError: no method matching setindex!(::Trebuchet, ::Int64, ::Int64)
Stacktrace:
 [1] top-level scope
   @ REPL[4]:1</code></pre>
</div>
<p>The error tells her two things:</p>
<ol style="list-style-type: decimal">
<li>a function named <code>setindex!</code> was called</li>
<li>it didn’t have a method for <code>Trebuchet</code>
</li>
</ol>
<p>Melissa wants to add the missing method to <code>setindex!</code> but
she doesn’t know where it is defined. There is a handy <em>macro</em>
named <code>@which</code> that obtains the module where the function is
defined.</p>
<div id="macros" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="macros" class="callout-inner">
<h3 class="callout-title">Macros<a class="anchor" aria-label="anchor" href="#macros"></a>
</h3>
<div class="callout-content">
<p>Macro names begin with <code>@</code> and they don’t need parentheses
or commas to delimit their arguments. Macros can transform any valid
Julia expression and are quite powerful. They can be expanded by
prepending <code>@macroexpand</code> to the macro call of interest.</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="pp">@which</span> setindex!</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">Base</span></span></code></pre>
</div>
<p>Now Melissa knows she needs to add a method to
<code>Base.setindex!</code> with the signature
<code>(::Trebuchet, ::Int64, ::Int64)</code>.</p>
<div id="keypoints" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div id="keypoints" class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints"></a>
</h3>
<div class="callout-content">
<ul>
<li>“You can think of functions being a collection of methods”</li>
<li>“Keep the number of positional arguments low”</li>
<li>“Macros transform Julia expressions”</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-06_Control_flow"><p>Content from <a href="06_Control_flow.html">Control flow</a></p>
<hr>
<p> Last updated on 2023-08-17 | 
        
        <a href="https://github.com/fishtree-attempt/julia-novice/edit/main/episodes/06_Control_flow.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 120 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“What are for and while loops?”</li>
<li>“How to use conditionals?”</li>
<li>“What is an interface?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
</div>
</div>
</div>
</div>
</div>
<section id="conditionals"><h2 class="section-heading">Conditionals<a class="anchor" aria-label="anchor" href="#conditionals"></a>
</h2>
<hr class="half-width">
<p>Before starting to work in a new document, Melissa has to:</p>
<p>Activate her environment</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Pkg</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">activate</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>, <span class="st">"projects"</span>, <span class="st">"trebuchet"</span>))</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">instantiate</span>()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  Activating project at `~/projects/trebuchet`
</code></pre>
</div>
<p>Importing the package under its modified name</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Trebuchet </span>as Trebuchets</span></code></pre>
</div>
<p>Defining the structures</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">mutable struct</span> Trebuchet <span class="op">&lt;:</span><span class="dt"> AbstractVector{Float64}</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  counterweight<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  release_angle<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Environment</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  wind<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  target_distance<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<p>Now that Melissa knows which method to add she thinks about the
implementation.</p>
<p>If the index is <code>1</code> she wants to set
<code>counterweight</code> while if the index is <code>2</code> she
wants to set <code>release_angle</code> and since these are the only two
fields she wants to return an error if anything else comes in. In Julia
the keywords to specify conditions are <code>if</code>,
<code>elseif</code> and <code>else</code>, closed with an
<code>end</code>. Thus she writes</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">setindex!</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>, v, i<span class="op">::</span><span class="dt">Int</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">===</span> <span class="fl">1</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>        trebuchet.counterweight <span class="op">=</span> v</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elseif</span> i <span class="op">===</span> <span class="fl">2</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        trebuchet.release_angle <span class="op">=</span> v</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">error</span>(<span class="st">"Trebuchet only accepts indices 1 and 2, yours is </span><span class="sc">$</span>i<span class="st">"</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="interfaces">Interfaces<a class="anchor" aria-label="anchor" href="#interfaces"></a>
</h3>
<p><code>setindex!</code> is actually one function of a widespread
<em>interface</em> in the Julia language: <code>AbstractArray</code>s.
An interface is a collection of methods that are all implemented by a
certain type. For example, the <a href="https://docs.julialang.org/en/v1/manual/interfaces/#man-interface-array" class="external-link">Julia
manual</a> lists all methods that a subtype of
<code>AbstractArray</code> need to implement to adhere to the
<code>AbstractArray</code> interface:</p>
<ul>
<li>
<code>size(A)</code> returns a tuple containing the dimensions of
<code>A</code>
</li>
<li>
<code>getindex(A, i::Int)</code> returns the value associated with
index <code>i</code>
</li>
<li>
<code>setindex!(A, v, i::Int)</code> writes a new value
<code>v</code> at the index <code>i</code>
</li>
</ul>
<p>If Melissa implements this interface for the <code>Trebuchet</code>
type, it will work with every function in <code>Base</code> that accepts
an <code>AbstractArray</code>.</p>
<p>She also needs to make <code>Trebuchet</code> a proper subtype of
<code>AbstractArray</code> as she tried in <a href="03_Julia_type_system.html">the types episode</a>. Therefore she
<em>restarts her REPL</em> and redefines <code>Trebuchet</code> and
<code>Environment</code>, as well as the slurp-and-splat
<code>shoot_distance</code> function:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Pkg</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">activate</span>(<span class="st">"projects/trebuchet"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Trebuchet </span>as Trebuchets</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="kw">mutable struct</span> Trebuchet <span class="op">&lt;:</span><span class="dt"> AbstractVector{Float64}</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  counterweight<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  release_angle<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Environment</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    wind<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    target_distance<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">shoot_distance</span>(args<span class="op">...</span>)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    Trebuchets.<span class="fu">shoot</span>(args<span class="op">...</span>)[<span class="fl">2</span>]</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">shoot_distance</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>, env<span class="op">::</span><span class="dt">Environment</span>)</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>     <span class="fu">shoot_distance</span>(env.wind, trebuchet.release_angle, trebuchet.counterweight)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>shoot_distance (generic function with 2 methods)</code></pre>
</div>
<p>Then she goes about implementing the <code>AbstractArray</code>
interface.</p>
<div id="implement-the-abstractarray-interface-for-trebuchet" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="implement-the-abstractarray-interface-for-trebuchet" class="callout-inner">
<h3 class="callout-title">Implement the <code>AbstractArray</code>
interface for <code>Trebuchet</code><a class="anchor" aria-label="anchor" href="#implement-the-abstractarray-interface-for-trebuchet"></a>
</h3>
<div class="callout-content">
<p>Now we know enough to actually implement the
<code>AbstractArray</code> interface. You don’t need to implement the
optional methods.</p>
<p>Hint: Take a look at the docstrings of <code>getfield</code> and
<code>tuple</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="bu">Base</span>.<span class="fu">size</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>) <span class="op">=</span> <span class="fu">tuple</span>(<span class="fl">2</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="bu">Base</span>.<span class="fu">getindex</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>, i<span class="op">::</span><span class="dt">Int</span>) <span class="op">=</span> <span class="fu">getfield</span>(trebuchet, i)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">setindex!</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>, v, i<span class="op">::</span><span class="dt">Int</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>     <span class="cf">if</span> i <span class="op">===</span> <span class="fl">1</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>         trebuchet.counterweight <span class="op">=</span> v</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elseif</span> i <span class="op">===</span> <span class="fl">2</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>        trebuchet.release_angle <span class="op">=</span> v</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">error</span>(<span class="st">"Trebuchet only accepts indices 1 and 2, yours is </span><span class="sc">$</span>i<span class="st">"</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>With the new <code>Trebuchet</code> defined with a complete
<code>AbstractArray</code> interface, Melissa tries again to modify a
counterweight by index:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>trebuchet <span class="op">=</span> <span class="fu">Trebuchet</span>(<span class="fl">500</span>, <span class="fl">0.25</span>pi)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2-element Trebuchet:
 500.0
   0.7853981633974483</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>trebuchet[<span class="fl">1</span>] <span class="op">=</span> <span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>trebuchet</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2-element Trebuchet:
 2.0
 0.7853981633974483</code></pre>
</div>
</div>
</section><section id="loops"><h2 class="section-heading">Loops<a class="anchor" aria-label="anchor" href="#loops"></a>
</h2>
<hr class="half-width">
<p>Now Melissa knows how to shoot the virtual trebuchet and get the
distance of the projectile, but in order to aim she needs to take a lot
of trial shots in a row. She wants her trebuchet to only shoot a hundred
meters.</p>
<p>She could execute the function several times on the REPL with
different parameters, but that gets tiresome quickly. A better way to do
this is to use loops.</p>
<p>But first Melissa needs a way to improve her parameters.</p>
<div id="digression-gradients" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="digression-gradients" class="callout-inner">
<h3 class="callout-title">Digression: Gradients<a class="anchor" aria-label="anchor" href="#digression-gradients"></a>
</h3>
<div class="callout-content">
<p>The <code>shoot_distance</code> function takes three input parameters
and returns one value (the distance). Whenever we change one of the
input parameters, we will get a different distance.</p>
<p>The <a href="https://en.wikipedia.org/wiki/Gradient" class="external-link"><em>gradient</em></a> of a
function gives the direction in which the return value will change when
each input value changes.</p>
<p>Since the <code>shoot_distance</code> function has three input
parameters, the gradient of <code>shoot_distance</code> will return a
3-element <code>Array</code>: one direction for each input
parameter.</p>
<p>Thanks to <a href="https://en.wikipedia.org/wiki/Automatic_differentiation" class="external-link">automatic
differentiation</a> and the Julia package <code>ForwardDiff.jl</code>
gradients can be calculated easily.</p>
</div>
</div>
</div>
<p>Melissa uses the <code>gradient</code> function of
<code>ForwardDiff.jl</code> to get the direction in which she needs to
change the parameters to make the largest difference.</p>
<div id="do-you-remember" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="do-you-remember" class="callout-inner">
<h3 class="callout-title">Do you remember?<a class="anchor" aria-label="anchor" href="#do-you-remember"></a>
</h3>
<div class="callout-content">
<p>What does Melissa need to write into the REPL to install the package
<code>ForwardDiff</code>?</p>
<ol style="list-style-type: decimal">
<li><code>] install ForwardDiff</code></li>
<li><code>add ForwardDiff</code></li>
<li><code>] add ForwardDiff.jl</code></li>
<li>
<code>] add ForwardDiff</code> <!---correct-->
</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>The correct solution is 4: <kbd>]</kbd> to enter pkg mode, then</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>pkg<span class="op">&gt;</span> add ForwardDiff</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">ForwardDiff</span>: gradient</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>imprecise_trebuchet <span class="op">=</span> <span class="fu">Trebuchet</span>(<span class="fl">500.0</span>, <span class="fl">0.25</span>pi);</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>environment <span class="op">=</span> <span class="fu">Environment</span>(<span class="fl">5.0</span>, <span class="fl">100.0</span>);</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>grad <span class="op">=</span> <span class="fu">gradient</span>(x <span class="fu">-&gt;</span>(<span class="fu">shoot_distance</span>([environment.wind, x[<span class="fl">2</span>], x[<span class="fl">1</span>]])</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>                      <span class="op">-</span> environment.target_distance),</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>                imprecise_trebuchet)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2-element Vector{Float64}:
  -0.12516519503998055
 -49.443442438172205</code></pre>
</div>
<p>Melissa now changes her arguments a little bit in the direction of
the gradient and checks the new distance.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>better_trebuchet <span class="op">=</span> imprecise_trebuchet <span class="op">-</span> <span class="fl">0.05</span> <span class="op">*</span> grad;</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">shoot_distance</span>([<span class="fl">5</span>, better_trebuchet[<span class="fl">2</span>], better_trebuchet[<span class="fl">1</span>]])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="op">-</span><span class="fl">2.785549535224487</span></span></code></pre>
</div>
<p>Great! That didn’t shoot past the target, but instead it landed a bit
too short.</p>
<div id="experiment" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="experiment" class="callout-inner">
<h3 class="callout-title">Experiment<a class="anchor" aria-label="anchor" href="#experiment"></a>
</h3>
<div class="callout-content">
<p>How far can you change the parameters in the direction of the
gradient, such that it still improves the distance?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Try a bunch of values!
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>better_trebuchet <span class="op">=</span> imprecise_trebuchet <span class="op">-</span> <span class="fl">0.04</span> <span class="op">*</span> grad</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">shoot_distance</span>([environment.wind, better_trebuchet[<span class="fl">2</span>], better_trebuchet[<span class="fl">1</span>]])</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fl">120.48753521261001</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>better_trebuchet <span class="op">=</span> imprecise_trebuchet <span class="op">-</span> <span class="fl">0.03</span> <span class="op">*</span> grad</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">shoot_distance</span>([environment.wind, better_trebuchet[<span class="fl">2</span>], better_trebuchet[<span class="fl">1</span>]])</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fl">107.80646596787481</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>better_trebuchet <span class="op">=</span> imprecise_trebuchet <span class="op">-</span> <span class="fl">0.02</span> <span class="op">*</span> grad</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">shoot_distance</span>([environment.wind, better_trebuchet[<span class="fl">2</span>], better_trebuchet[<span class="fl">1</span>]])</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fl">33.90699307740854</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>better_trebuchet <span class="op">=</span> imprecise_trebuchet <span class="op">-</span> <span class="fl">0.025</span> <span class="op">*</span> grad</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">shoot_distance</span>([environment.wind, better_trebuchet[<span class="fl">2</span>], better_trebuchet[<span class="fl">1</span>]])</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fl">75.87613276409223</span></span></code></pre>
</div>
<p>Looks like the “best” trebuchet for a target 100 m away will be
between 2.5% and 3% down the gradient from the imprecise trebuchet.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="for-loops">For loops<a class="anchor" aria-label="anchor" href="#for-loops"></a>
</h3>
<p>Now that Melissa knows it is going in the right direction she wants
to automate the additional iterations. She writes a new function
<code>aim</code>, that performs the application of the gradient
<code>N</code> times.</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">aim</span>(trebuchet, environment; N <span class="op">=</span> <span class="fl">5</span>, η <span class="op">=</span> <span class="fl">0.05</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>           better_trebuchet <span class="op">=</span> <span class="fu">copy</span>(trebuchet)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>           <span class="cf">for</span> _ <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span>N</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>               grad <span class="op">=</span> <span class="fu">gradient</span>(x <span class="op">-&gt;</span> (<span class="fu">shoot_distance</span>([environment.wind, x[<span class="fl">2</span>], x[<span class="fl">1</span>]])</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>                                     <span class="op">-</span> environment.target_distance),</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                               better_trebuchet)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>               better_trebuchet <span class="op">-=</span> η <span class="op">*</span> grad</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>           <span class="cf">end</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>           <span class="cf">return</span> <span class="fu">Trebuchet</span>(better_trebuchet[<span class="fl">1</span>], better_trebuchet[<span class="fl">2</span>])</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>       <span class="kw">end</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>better_trebuchet  <span class="op">=</span> <span class="fu">aim</span>(imprecise_trebuchet, environment);</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="fu">shoot_distance</span>(environment.wind, better_trebuchet[<span class="fl">2</span>], better_trebuchet[<span class="fl">1</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="op">-</span><span class="fl">2.2195176928658915</span></span></code></pre>
</div>
<div id="explore" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="explore" class="callout-inner">
<h3 class="callout-title">Explore<a class="anchor" aria-label="anchor" href="#explore"></a>
</h3>
<div class="callout-content">
<p>Play around with different inputs of <code>N</code> and
<code>η</code>. How close can you come?</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>This is a highly non-linear system and thus very sensitive. The
distances across different values for the counterweight and the release
angle α look like this: <img src="../fig/shoot_surface.png" alt="" width="600" height="400" class="figure"></p>
</div>
</div>
</div>
</div>
<div id="aborting-programs" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="aborting-programs" class="callout-inner">
<h3 class="callout-title">Aborting programs<a class="anchor" aria-label="anchor" href="#aborting-programs"></a>
</h3>
<div class="callout-content">
<p>If a call takes too long, you can abort it with
<code>Ctrl-c</code></p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="while-loops">While loops<a class="anchor" aria-label="anchor" href="#while-loops"></a>
</h3>
<p>Melissa finds the output of the above <code>aim</code> function too
unpredictable to be useful. That’s why she decides to change it a bit.
This time she uses a <code>while</code>-loop to run the iterations until
she is sufficiently near her target.</p>
<p>(<em>Hint:</em> <strong>ε</strong> is
<code>\epsilon</code><kbd>tab</kbd>, and <strong>η</strong> is
<code>\eta</code><kbd>tab</kbd>.)</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">aim</span>(trebuchet, environment; ε <span class="op">=</span> <span class="fl">0.1</span>, η <span class="op">=</span> <span class="fl">0.05</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    better_trebuchet <span class="op">=</span> <span class="fu">copy</span>(trebuchet)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    hit <span class="op">=</span> x <span class="op">-&gt;</span> (<span class="fu">shoot_distance</span>([environment.wind, x[<span class="fl">2</span>], x[<span class="fl">1</span>]])</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>                          <span class="op">-</span> environment.target_distance)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>            <span class="cf">while</span> <span class="fu">abs</span>(<span class="fu">hit</span>(better_trebuchet)) <span class="op">&gt;</span> ε</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>                grad <span class="op">=</span> <span class="fu">gradient</span>(hit, better_trebuchet)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>                better_trebuchet <span class="op">-=</span> η <span class="op">*</span> grad</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">end</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="fu">Trebuchet</span>(better_trebuchet[<span class="fl">1</span>], better_trebuchet[<span class="fl">2</span>])</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">end</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>better_trebuchet <span class="op">=</span> <span class="fu">aim</span>(imprecise_trebuchet, environment);</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="fu">shoot_distance</span>(better_trebuchet, environment)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">100.05601729579894</span></span></code></pre>
</div>
<p>That is more what she had in mind. Your trebuchet may be tuned
differently, but it should hit just as close as hers.</p>
<div id="keypoints" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div id="keypoints" class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints"></a>
</h3>
<div class="callout-content">
<ul>
<li>“Interfaces are informal”</li>
<li>“Use for loops for a known number of iterations and while loops for
an unknown number of iterations.”</li>
<li>“Julia packages compose nicely.”</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-07_Using_Modules"><p>Content from <a href="07_Using_Modules.html">Using Modules</a></p>
<hr>
<p> Last updated on 2023-08-09 | 
        
        <a href="https://github.com/fishtree-attempt/julia-novice/edit/main/episodes/07_Using_Modules.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 15 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“What’s the purpose of modules?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Structure your code using modules”</li>
<li>“Use Revise.jl to track changes”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="modules"><h2 class="section-heading">Modules<a class="anchor" aria-label="anchor" href="#modules"></a>
</h2>
<hr class="half-width">
<p>Melissa now has a bunch of definitions in her running Julia session
and using the REPL for interactive exploration is great, but it is more
and more taxing to keep in mind what is defined, and all the definitions
are lost once she closes the REPL.</p>
<p>That is why she decides to put her code in a file. She opens up her
text editor and creates a file called <code>aim_trebuchet.jl</code> in
the current working directory and pastes the code she got so far in
there. This is what it looks like:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Pkg</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">activate</span>(<span class="st">"projects/trebuchet"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Trebuchet </span>as Trebuchets</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">ForwardDiff</span>: gradient</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">mutable struct</span> Trebuchet <span class="op">&lt;:</span><span class="dt"> AbstractVector{Float64}</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  counterweight<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  release_angle<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="bu">Base</span>.<span class="fu">copy</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>) <span class="op">=</span> <span class="fu">Trebuchet</span>(trebuchet.counterweight, trebuchet.release_angle)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="bu">Base</span>.<span class="fu">size</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>) <span class="op">=</span> <span class="fu">tuple</span>(<span class="fl">2</span>)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="bu">Base</span>.<span class="fu">getindex</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>, i<span class="op">::</span><span class="dt">Int</span>) <span class="op">=</span> <span class="fu">getfield</span>(trebuchet, i)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">setindex!</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>, v, i<span class="op">::</span><span class="dt">Int</span>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">===</span> <span class="fl">1</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>        trebuchet.counterweight <span class="op">=</span> v</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elseif</span> i <span class="op">===</span> <span class="fl">2</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>        trebuchet.release_angle <span class="op">=</span> v</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">error</span>(<span class="st">"Trebuchet only accepts indices 1 and 2, yours is </span><span class="sc">$</span>i<span class="st">"</span>)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Environment</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  wind<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  target_distance<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">shoot_distance</span>(windspeed, angle, weight)</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    Trebuchets.<span class="fu">shoot</span>(windspeed, angle, weight)[<span class="fl">2</span>]</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">shoot_distance</span>(args<span class="op">...</span>)</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    Trebuchets.<span class="fu">shoot</span>(args<span class="op">...</span>)[<span class="fl">2</span>]</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">shoot_distance</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>, env<span class="op">::</span><span class="dt">Environment</span>)</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">shoot_distance</span>(env.wind, trebuchet.release_angle, trebuchet.counterweight)</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">aim</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>, environment<span class="op">::</span><span class="dt">Environment</span>; ε <span class="op">=</span> <span class="fl">1e-1</span>, η <span class="op">=</span> <span class="fl">0.05</span>)</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>    better_trebuchet <span class="op">=</span> <span class="fu">copy</span>(trebuchet)</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>    hit <span class="op">=</span> x <span class="op">-&gt;</span> (<span class="fu">shoot_distance</span>([environment.wind, x[<span class="fl">2</span>], x[<span class="fl">1</span>]]) <span class="op">-</span> environment.target_distance)</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="fu">abs</span>(<span class="fu">hit</span>(better_trebuchet)) <span class="op">&gt;</span> ε</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>        grad <span class="op">=</span> <span class="fu">gradient</span>(hit, better_trebuchet)</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>        better_trebuchet <span class="op">-=</span> η <span class="op">*</span> grad</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">Trebuchet</span>(better_trebuchet[<span class="fl">1</span>], better_trebuchet[<span class="fl">2</span>])</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>imprecise_trebuchet <span class="op">=</span> <span class="fu">Trebuchet</span>(<span class="fl">500.0</span>, <span class="fl">0.25</span>pi)</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>environment <span class="op">=</span> <span class="fu">Environment</span>(<span class="fl">5</span>, <span class="fl">100</span>)</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>precise_trebuchet <span class="op">=</span> <span class="fu">aim</span>(imprecise_trebuchet, environment)</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a><span class="fu">shoot_distance</span>(precise_trebuchet, environment)</span></code></pre>
</div>
<p>Now Melissa can run <code>include("aim_trebuchet.jl")</code> in the
REPL to execute her code.</p>
<p>She also recognizes that she has a bunch of definitions at the
beginning that she doesn’t need to execute more than once in a session
and some lines at the end that use these definitions which she might run
more often. She will split these in two separate files and put the
definitions into a <em>module</em>. The module will put the definitions
into their own namespace which is the module name. This means Melissa
would need to put the module name before each definition if she uses it
outside of the module. But she remembers from the <a href="04_Using_the_package_manager.html">Using the package manager
Episode</a> that she can export names that don’t need to be
prefixed.</p>
<p>She names her module <code>MelissasModule</code> and accordingly the
file <code>MelissasModule.jl</code>. From this module she exports the
names <code>aim</code>, <code>shoot_distance</code>,
<code>Trebuchet</code> and <code>Environment</code>. This way she can
leave her other code unchanged.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">module</span> MelissasModule</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Pkg</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">activate</span>(<span class="st">"projects/trebuchet"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Trebuchet </span>as Trebuchets</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">ForwardDiff</span>: gradient</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="kw">export</span> aim, shoot_distance, Trebuchet, Environment</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="kw">mutable struct</span> Trebuchet <span class="op">&lt;:</span><span class="dt"> AbstractVector{Float64}</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  counterweight<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  release_angle<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="bu">Base</span>.<span class="fu">copy</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>) <span class="op">=</span> <span class="fu">Trebuchet</span>(trebuchet.counterweight, trebuchet.release_angle)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="bu">Base</span>.<span class="fu">size</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>) <span class="op">=</span> <span class="fu">tuple</span>(<span class="fl">2</span>)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="bu">Base</span>.<span class="fu">getindex</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>, i<span class="op">::</span><span class="dt">Int</span>) <span class="op">=</span> <span class="fu">getfield</span>(trebuchet, i)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">setindex!</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>, v, i<span class="op">::</span><span class="dt">Int</span>)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">===</span> <span class="fl">1</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>        trebuchet.counterweight <span class="op">=</span> v</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elseif</span> i <span class="op">===</span> <span class="fl">2</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>        trebuchet.release_angle <span class="op">=</span> v</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>        <span class="fu">error</span>(<span class="st">"Trebuchet only accepts indices 1 and 2, yours is </span><span class="sc">$</span>i<span class="st">"</span>)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Environment</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>  wind<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>  target_distance<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">shoot_distance</span>(windspeed, angle, weight)</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    Trebuchets.<span class="fu">shoot</span>(windspeed, angle, weight)[<span class="fl">2</span>]</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">shoot_distance</span>(args<span class="op">...</span>)</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    Trebuchets.<span class="fu">shoot</span>(args<span class="op">...</span>)[<span class="fl">2</span>]</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">shoot_distance</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>, env<span class="op">::</span><span class="dt">Environment</span>)</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">shoot_distance</span>(env.wind, trebuchet.release_angle, trebuchet.counterweight)</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">aim</span>(trebuchet<span class="op">::</span><span class="dt">Trebuchet</span>, environment<span class="op">::</span><span class="dt">Environment</span>; ε <span class="op">=</span> <span class="fl">1e-1</span>, η <span class="op">=</span> <span class="fl">0.05</span>)</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    better_trebuchet <span class="op">=</span> <span class="fu">copy</span>(trebuchet)</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>    hit <span class="op">=</span> x <span class="op">-&gt;</span> (<span class="fu">shoot_distance</span>([environment.wind, x[<span class="fl">2</span>], x[<span class="fl">1</span>]]) <span class="op">-</span> environment.target_distance)</span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="fu">abs</span>(<span class="fu">hit</span>(better_trebuchet)) <span class="op">&gt;</span> ε</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>        grad <span class="op">=</span> <span class="fu">gradient</span>(hit, better_trebuchet)</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>        better_trebuchet <span class="op">-=</span> η <span class="op">*</span> grad</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">Trebuchet</span>(better_trebuchet[<span class="fl">1</span>], better_trebuchet[<span class="fl">2</span>])</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="co"># MelissasModule</span></span></code></pre>
</div>
<p>The rest of the code goes to a file she calls
<code>MelissasCode.jl</code>.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">.MelissasModule</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>imprecise_trebuchet <span class="op">=</span> <span class="fu">Trebuchet</span>(<span class="fl">500.0</span>, <span class="fl">0.25</span>pi)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>environment <span class="op">=</span> <span class="fu">Environment</span>(<span class="fl">5</span>, <span class="fl">100</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>precise_trebuchet <span class="op">=</span> <span class="fu">aim</span>(imprecise_trebuchet, environment)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">shoot_distance</span>(precise_trebuchet, environment)</span></code></pre>
</div>
<p>Now she can include <code>MelissasModule.jl</code> once, and change
and include <code>MelissasCode.jl</code> as often as she wants. But what
if she wants to make changes to the module? If she changes the code in
the module, re-includes the module and runs her code again, she only
gets a bunch of warnings, but her changes are not applied.</p>
</section><section id="revise.jl"><h2 class="section-heading">Revise.jl<a class="anchor" aria-label="anchor" href="#revise.jl"></a>
</h2>
<hr class="half-width">
<p><code>Revise.jl</code> is a package that can keep track of changes in
your files and load these in a running Julia session.</p>
<p>Melissa needs to take two things into account:</p>
<ul>
<li>
<code>using Revise</code> must come before <code>using</code> any
Package that she wants to be tracked</li>
<li>she should use <code>includet</code> instead of <code>include</code>
for included files (<code>t</code> for “tracking”)</li>
</ul>
<p>Thus she now runs</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Revise</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">includet</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>,<span class="st">"MelissasModule.jl"</span>))</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">include</span>(<span class="fu">joinpath</span>(<span class="pp">@__DIR__</span>,<span class="st">"MelissasCode.jl"</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">100.05601729579894</span></span></code></pre>
</div>
<p>and any change she makes in <code>MelissasModule.jl</code> will be
visible in the next run of her code.</p>
<div id="did-i-say-any-changes" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="did-i-say-any-changes" class="callout-inner">
<h3 class="callout-title">Did I say any changes?<a class="anchor" aria-label="anchor" href="#did-i-say-any-changes"></a>
</h3>
<div class="callout-content">
<p>Well, almost any. Revise can’t track changes to structures.</p>
</div>
</div>
</div>
<div id="keypoints" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div id="keypoints" class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints"></a>
</h3>
<div class="callout-content">
<ul>
<li>“Modules introduce namespaces”</li>
<li>“Public API has to be documented and can be exported”</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-08_Creating_Packages"><p>Content from <a href="08_Creating_Packages.html">Creating Packages</a></p>
<hr>
<p> Last updated on 2023-08-09 | 
        
        <a href="https://github.com/fishtree-attempt/julia-novice/edit/main/episodes/08_Creating_Packages.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 30 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“How to create a package?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Learn setting up a project using modules.”</li>
<li>“Learn common package structure.”</li>
<li>“Learn to browse GitHub or juliahub for packages and find
documentation.”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Melissa is now confident that her module is fine and she wants to
make it available for the rest of her physics club. She decides to put
it in a package. This way she can also locally use Julia’s package
manager for managing her module.</p>
<section id="from-project-to-package"><h2 class="section-heading">From project to package<a class="anchor" aria-label="anchor" href="#from-project-to-package"></a>
</h2>
<hr class="half-width">
<p>The path from having a module to having a package is actually very
short: Packages need a <code>name</code> and a <code>uuid</code> field
in their <code>Project.toml</code>.</p>
<p>A UUID is a <strong>u</strong>niversally <strong>u</strong>nique
<strong>id</strong>entifier. Thankfully Julia comes with the
<code>UUIDs</code> package, that can generate <code>uuid</code>s for
Melissa via <code>UUIDs.uuid4()</code>.</p>
<p>In addition Melissa needs to have a specific directory structure. She
looks at the example package <a href="https://github.com/JuliaLang/Example.jl" class="external-link"><code>Example.jl</code></a>
which has the following structure:</p>
<pre><code>├── docs
│   ├── make.jl
│   ├── Project.toml
│   └── src
│       └── index.md
├── LICENSE.md
├── Project.toml
├── README.md
├── src
│   └── Example.jl
└── test
    └── runtests.jl</code></pre>
<div id="make-it-a-package" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="make-it-a-package" class="callout-inner">
<h3 class="callout-title">Make it a package<a class="anchor" aria-label="anchor" href="#make-it-a-package"></a>
</h3>
<div class="callout-content">
<p>Open your <code>Project.toml</code> and add
<code>name = &lt;your name&gt;</code>,
<code>uuid = &lt;your uuid&gt;</code> and optionally an
<code>authors</code> field, each on a separate line.</p>
</div>
</div>
</div>
<p>Now Melissa can use</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pkg<span class="op">&gt;</span> dev . <span class="co"># or path to package instead of `.`</span></span></code></pre>
</div>
<p>instead of needing to <code>includet MelissasModule.jl</code>, and
she can write <code>using MelissasModule</code> instead of
<code>.using MelissasModule</code>.</p>
</section><section id="register-a-package"><h2 class="section-heading">Register a package<a class="anchor" aria-label="anchor" href="#register-a-package"></a>
</h2>
<hr class="half-width">
<p>In order for her friends to be able to get the package, Melissa
registers the package in the <em>general registry</em>. This can be done
either via <a href="https://juliahub.com/ui/Registrator" class="external-link">JuliaHub</a> or
by making a pull request on <a href="https://github.com/JuliaRegistries/General/pulls" class="external-link">GitHub</a> which
can also be automated by the <a href="https://github.com/JuliaRegistries/Registrator.jl" class="external-link">Julia
Registrator</a>.</p>
</section><section id="creating-a-new-package"><h2 class="section-heading">Creating a new package<a class="anchor" aria-label="anchor" href="#creating-a-new-package"></a>
</h2>
<hr class="half-width">
<p>Melissa thinks next time she will start with a package right
away.</p>
<p>Browsing the packages she found <a href="https://invenia.github.io/PkgTemplates.jl/stable/" class="external-link">PkgTemplates.jl</a>
and <a href="https://github.com/tpapp/PkgSkeleton.jl" class="external-link">PkgSkeleton.jl</a>
which makes setting up the typical folder structure very easy.</p>
<div id="create-your-own-package" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="create-your-own-package" class="callout-inner">
<h3 class="callout-title">Create your own package<a class="anchor" aria-label="anchor" href="#create-your-own-package"></a>
</h3>
<div class="callout-content">
<p>Look at the documentation of the package creation helper packages and
create a new package using <code>generate</code>.</p>
</div>
</div>
</div>
<div id="keypoints" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div id="keypoints" class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints"></a>
</h3>
<div class="callout-content">
<ul>
<li>“The general registry is hosted on GitHub.”</li>
<li>“Packaging is easy”</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-09_Adding_tests"><p>Content from <a href="09_Adding_tests.html">Adding tests</a></p>
<hr>
<p> Last updated on 2023-08-18 | 
        
        <a href="https://github.com/fishtree-attempt/julia-novice/edit/main/episodes/09_Adding_tests.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 40 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“What are unit tests?”</li>
<li>“How are tests organized in Julia?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Learn to create unit tests and test-sets using the
<code>Test</code> standard library”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="unit-tests"><h2 class="section-heading">Unit tests<a class="anchor" aria-label="anchor" href="#unit-tests"></a>
</h2>
<hr class="half-width">
<p>Now that Melissa has released her first package she fears that future
changes will impact the existing functionality of her package. This can
be prevented by adding tests to her package.</p>
<p>Looking at the structure of other packages Melissa figured out that
tests usually go in a separate <code>test</code> folder next to the
<code>src</code> folder. This should contain a <code>runtests.jl</code>
file.</p>
<p>The standard library <code>Test</code> provides the functionality for
writing tests: namely, the macros <code>@test</code> and
<code>@testset</code>.</p>
<p><code>@test</code> can be used to test a single equality, such as</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Test</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="pp">@test</span> <span class="fl">1</span> <span class="op">+</span> <span class="fl">1</span> <span class="op">==</span> <span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Test Passed</code></pre>
</div>
<p>Several tests can be grouped in a test-set with a descriptive
name</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Test</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="pp">@testset</span> <span class="st">"Test arithmetic equalities"</span> <span class="cf">begin</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="pp">@test</span> <span class="fl">1</span> <span class="op">+</span> <span class="fl">1</span> <span class="op">==</span> <span class="fl">2</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fu">Test.DefaultTestSet</span><span class="op">(</span><span class="st">"Test arithmetic equalities"</span>, <span class="va">Any</span><span class="op">[</span><span class="op">]</span>, <span class="fl">1</span>, <span class="va">false</span>, <span class="va">false</span>, <span class="va">true</span>, <span class="fl">1.692362057157532e9</span>, <span class="fl">1.692362057205318e9</span>, <span class="va">false</span><span class="op">)</span></span></code></pre>
</div>
<p>With this Melissa can run her test using the pkg mode of the
REPL:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>(MelissasModule) pkg<span class="op">&gt;</span> test</span></code></pre>
</div>
<div class="section level3">
<h3 id="test-specific-dependencies">Test specific dependencies<a class="anchor" aria-label="anchor" href="#test-specific-dependencies"></a>
</h3>
<p>Melissa needed to add <code>Test</code> to her package in order to
run the code above, but actually <code>Test</code> is not needed for her
package other than testing. Thus it is possible to move the
<code>Test</code> entry in the <code>Project.toml</code> file from
<code>[deps]</code> to an <code>[extras]</code> section and then add
another entry:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>[targets]</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> [<span class="st">"Test"</span>]</span></code></pre>
</div>
<p>Check out the <a href="../code/Project.toml">sample project file</a> for
a complete example.</p>
<div id="challenge" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge" class="callout-inner">
<h3 class="callout-title">Challenge<a class="anchor" aria-label="anchor" href="#challenge"></a>
</h3>
<div class="callout-content">
<p>Create a test for MelissasModule Create a test that ensures that
<code>shoot_distance</code> returns a value that is between
<code>target - ε</code> and <code>target + ε</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">JULIA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode julia" tabindex="0"><code class="sourceCode julia"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">MelissasModule</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Test</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="pp">@testset</span> <span class="st">"Test hitting target"</span> <span class="cf">begin</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>   imprecise_trebuchet <span class="op">=</span> <span class="fu">Trebuchet</span>(<span class="fl">500.0</span>, <span class="fl">0.25</span>pi)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>   environment <span class="op">=</span> <span class="fu">Environment</span>(<span class="fl">5</span>, <span class="fl">100</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>   precise_trebuchet <span class="op">=</span> <span class="fu">aim</span>(imprecise_trebuchet, environment)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>   <span class="pp">@test</span> <span class="fl">100</span> <span class="op">-</span> <span class="fl">0.1</span> <span class="op">&lt;=</span> <span class="fu">shoot_distance</span>(precise_trebuchet, environment) <span class="op">&lt;=</span> <span class="fl">100</span> <span class="op">+</span> <span class="fl">0.1</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>   <span class="co"># default ε is 0.1</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div id="keypoints" class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints"></a>
</h3>
<div class="callout-content">
<ul>
<li>“Tests are important”</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-10_Wrapping_Up"><p>Content from <a href="10_Wrapping_Up.html">Wrapping Up and Moving Forward</a></p>
<hr>
<p> Last updated on 2023-08-18 | 
        
        <a href="https://github.com/fishtree-attempt/julia-novice/edit/main/episodes/10_Wrapping_Up.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 5 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“What have I accomplished in this tutorial?”</li>
<li>“Where can I continue to learn Julia?”</li>
<li>“Who else is using Julia in my field?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Review the progress you have made”</li>
<li>“Find other Julia resources to use in your own work”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="congratulations-you-have-taken-your-first-steps-in-the-julia-language"><h2 class="section-heading">Congratulations! You have taken your first steps in the Julia
language<a class="anchor" aria-label="anchor" href="#congratulations-you-have-taken-your-first-steps-in-the-julia-language"></a>
</h2>
<hr class="half-width">
<p>Learning any new programming language can be intimidating, and the
learning process is never over. However, finishing this workshop is
worth celebrating! To review, you have learned:</p>
<ul>
<li>How to write and run Julia code</li>
<li>How to install packages from Julia’s repository</li>
<li>How important Types are in Julia and how to handle them</li>
<li>How to write if statements, for loops, and functions</li>
<li>How to organize code into modules and make sure that code is robust
to tests</li>
</ul>
<p>We hope this is just the beginning of your journey in Julia. Below,
we detail some ways you can stay connected with the Julia community,
connect with other Julia-users in your field, and find resources for
writing your own Julia code.</p>
</section><section id="the-julia-community"><h2 class="section-heading">The Julia Community<a class="anchor" aria-label="anchor" href="#the-julia-community"></a>
</h2>
<hr class="half-width">
<p>As you learn Julia, we encourage you to connect with other users,
share questions, and stay involved. Here are a few places you can
participate:</p>
<ul>
<li><p><a href="https://discourse.julialang.org/" class="external-link">The JuliaLang
Discourse forum</a> is a great place to ask Julia-specific questions,
read about new Julia packages, and stay up-to-date on community
events</p></li>
<li><p><a href="https://julialang.org/slack/" class="external-link">The Julia Slack</a> is
very active, and people will often respond to questions within
minutes</p></li>
<li><p>Likewise you can connect via the <a href="https://julialang.zulipchat.com" class="external-link">Julia Zulip</a> or <a href="https://discord.com/invite/C5h9D4j" class="external-link">discord</a>.</p></li>
<li><p>It is a good idea to look out for channels called #helpdesk or
similar.</p></li>
<li><p><a href="https://docs.julialang.org/en/v1/" class="external-link">The official Julia
Documentation</a> is a more comprehensive overview of programming in
Julia, and a good next step to continue learning</p></li>
<li><p><a href="https://juliacon.org/2023/" class="external-link">JuliaCon</a> is an annual
in-person conference of Julia users, but talks are also streamed
online</p></li>
</ul>
<p>You can also get Julia help on Stack Overflow, as with other coding
languages.</p>
</section><section id="domain-specific-julia-organizations"><h2 class="section-heading">Domain-specific Julia Organizations<a class="anchor" aria-label="anchor" href="#domain-specific-julia-organizations"></a>
</h2>
<hr class="half-width">
<p>Julia users have also created domain-specific organizations, to
better develop packages for specific fields. These can be a great place
to go to learn more about the specific Julia packages available for your
work. As just a sample:</p>
<ul>
<li>
<a href="https://juliaactuary.org/" class="external-link">JuliaActuary</a> for actuarial
science</li>
<li>
<a href="http://juliaastro.org/dev/index.html" class="external-link">JuliaAstro</a> for
astronomy</li>
<li>
<a href="https://ecojulia.org/" class="external-link">EcoJulia</a> for ecological
research</li>
<li>
<a href="https://juliarobotics.org/" class="external-link">JuliaRobotics</a> for robotics
control</li>
<li>
<a href="https://biojulia.dev/" class="external-link">BioJulia</a> for biological and
genetic research</li>
<li>
<a href="https://juliageo.org/" class="external-link">JuliaGeo</a> for geospatial
data</li>
<li>
<a href="https://juliapackages.com/p/mlj" class="external-link">MLJ</a> for machine
learning</li>
</ul>
<p>And many more that you can explore <a href="https://julialang.org/community/organizations/" class="external-link">here!</a></p>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
				<p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/fishtree-attempt/julia-novice/edit/main/README.md" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/fishtree-attempt/julia-novice/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a> 
        | <a href="https://github.com/fishtree-attempt/julia-novice/" class="external-link">Source</a></p>
				<p><a href="https://github.com/fishtree-attempt/julia-novice/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:SimonChrist@gmx.de">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="../LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p><a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">Template licensed under CC-BY 4.0</a> by <a href="https://carpentries.org" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper" class="external-link">sandpaper (0.12.5)</a>,
        <a href="https://github.com/carpentries/pegboard" class="external-link">pegboard (0.5.3)</a>,
      and <a href="https://github.com/carpentries/varnish/tree/0.2.17" class="external-link">varnish (0.2.17)</a>.</p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
			<i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back to top"></i><br><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://preview.carpentries.org/julia-novice/instructor/aio.html",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://preview.carpentries.org/julia-novice/instructor/aio.html",
  "identifier": "https://preview.carpentries.org/julia-novice/instructor/aio.html",
  "dateCreated": "2023-08-18",
  "dateModified": "2023-08-18",
  "datePublished": "2023-08-18"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo
    2022-11-07: we have gotten a notification that we have an overage for our
    tracking and I'm pretty sure this has to do with Workbench usage.
    Considering that I am not _currently_ using this tracking because I do not
    yet know how to access the data, I am turning this off for now.
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setDomains", ["*.preview.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
    _paq.push(["setDoNotTrack", true]);
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
          var u="https://carpentries.matomo.cloud/";
          _paq.push(['setTrackerUrl', u+'matomo.php']);
          _paq.push(['setSiteId', '1']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
  </script>
  End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

